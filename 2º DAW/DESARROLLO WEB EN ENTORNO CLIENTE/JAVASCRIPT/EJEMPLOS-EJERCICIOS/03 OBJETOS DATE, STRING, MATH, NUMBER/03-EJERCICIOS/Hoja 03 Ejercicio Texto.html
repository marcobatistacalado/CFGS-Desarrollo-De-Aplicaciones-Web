<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style type="text/css">
      body {
        font-family: "Kite One", sans-serif;
      }

      div {
        border-style: solid;
        border-width: 2px;
        width: 500px;
        margin: auto;
        padding: 20px;
      }
      .uno {
        line-height: 30px;
      }
    </style>
    <script>
      //variable global
      function cargar(){
      originText = document.getElementById("mitexto").innerHTML;
      }

      function buscarPalabra() {
        let text = document.getElementById("mitexto").innerHTML;
        let word = document.getElementById("busca").value.trim();
        var pos = 0;
        var cont = 0;
        var longitud = 0;
        do {
          pos = text.indexOf(word, pos + longitud);
          if (cont == 0) {
            longitud = word.length;
          }
          if (pos != -1) {
            alert("Posicion encontrada:" + pos);
            cont++;
          }
        } while (pos != -1);
        alert("Posicion total encontradas: "+cont);
      }

	  function remplazarPalabra() {
		let word1 = document.getElementById("pal1").value.trim();
		let word2 = document.getElementById("pal2").value.trim();
		let text = (document.getElementById("mitexto").innerHTML).split(" ");
		
		if (word1 === "" || word2 === "") {
          alert("Ambas palabras deben estar completas");
          return;
        }

		/*LO SUYO SERIA HACER UN REPLACE CON UNA EXPRESION REGULAR X EJEMPLO*/

		//esto en teoria funciona es como un replace basicamente
		for (let i=0; i<text.length; i++){
			if (text[i]== word1){
				text[i] = word2;
			}
      if(text[i] == word1+","){
        text[i] = word2+",";
      }
		}

		let texto2 = "";
		//bucle que convierte el array en texto y le añade los espacios
		for(let i=0; i<text.length;i++){
			texto2 += text[i];
			texto2 += " ";
		}
		document.getElementById("mitexto").innerHTML = texto2;

	  }

    function cambiarTexto(opc) {
      switch (opc){
        case 1:
          document.getElementById("mitexto").innerHTML = originText.toLowerCase();
          break;
        case 2: 
          document.getElementById("mitexto").innerHTML = originText.toUpperCase();
          break;
        case 3: 
          document.getElementById("mitexto").innerHTML = originText;
          break;
      }
    }
    </script>
  </head>
  <body onload="cargar()">
    <form>
      <br />
      <br />
      <div id="mitexto">
        En la granja, la vaca pasea tranquila por el prado, disfrutando del sol. La vaca es un animal muy importante, ya que nos da leche fresca cada mañana. Junto a la vaca, la oveja se mueve de un lado a otro, pastando la hierba verde. Mientras tanto, la gallina picotea el suelo, buscando granos y semillas. La gallina también pone huevos, que son un alimento básico en la granja. Cada mañana, el granjero cuida de la vaca, la oveja y la gallina,  asegurándose de que estén bien alimentadas. La vaca, la oveja y la gallina forman parte de la vida diaria en la granja. Los niños suelen jugar cerca de la vaca, acariciando su suave piel. La oveja, con su blanca lana, también atrae la atención de los más pequeños. Y, por supuesto, la gallina siempre corretea, haciendo que todos rían con sus saltitos. Así, en la granja, la vaca, la oveja y la gallina se convierten en los mejores amigos de todos, creando un ambiente alegre y lleno de vida.
 </div>
      </div>
      <br />
      <div>
        Introduce una palabra para buscarla en el texto <br /><br />
        <input type="text" id="busca" size="10" />
        <input
          type="button"
          class="uno"
          value="BUSCAR"
          onclick="buscarPalabra()"
        /><br /><br />
        Posición:
        <p id="pos"></p>
      </div>
      <br />
      <div>
        Introduce dos palabras para reemplazar la primera por la segunda
        <p>
          Busco <input type="text" id="pal1" size="10" /> Reemplazo
          <input type="text" id="pal2" size="10" />
        </p>
        <input type="button" class="uno" value="REEMPLAZAR" onclick="remplazarPalabra()" />
      </div>
      <br />
      <div>
        <input
          type="button"
          class="uno"
          value="Poner en minúsculas"
          onclick="cambiarTexto(1)"
        />
        <input
          type="button"
          class="uno"
          value="Poner en MAYÚSCULAS"
          onclick="cambiarTexto(2)"
        />
        <input type="button" class="uno" value="RESTAURAR" onclick="cambiarTexto(3)" />
      </div>
    </form>
  </body>
</html>
